<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>vue</title>
    <link rel="stylesheet" href="../../css/bootstrap.min-3.3.7.css">
</head>
<body>
<div id="app">
    <h3>兄弟组件通信</h3>
    <ul>
        <li>通过 props</li>
        <li>通过 emit/on</li>
        <li>通过 $dispatch $broadcast（2.0+已废除）</li>
        <li>通过 vuex</li>
    </ul>
    <section>
        <h3>emit/on 例子</h3>
        <parent></parent>
    </section>
</div>
<section class="sr-only">
    <template id="template1">
        <div>
            <son1></son1>
            <br>
            <son2></son2>
        </div>
    </template>
    <template id="template2">
        <div style="border: solid 1px red">
            <h4>模块1</h4>
            <input type="text" v-model="msg">
            <button class="btn btn-primary" @click="sendMsg">发送</button>
        </div>
    </template>
    <template id="template3">
        <div style="border: solid 1px blue">
            <h4>模块2</h4>
            <div>请先监听模块1发送数据<button class="btn btn-primary" @click="getMsg">监听</button></div>
            收到模块1发送的数据:{{msg}}
        </div>
    </template>
</section>
<script src="../../lib/vue.min-2.4.0.js"></script>
<script>
    var vue = new Vue({
        el: "#app",
        components: {
            parent: {
                template: '#template1',
                components: {
                    son1: {
                        data(){
                            return {
                                msg: ''
                            }
                        },
                        methods: {
                            sendMsg(){
                                vue.$emit('receive', this.msg)
                            }
                        },
                        template: '#template2'
                    },
                    son2: {
                        data(){
                            return {
                                msg: ''
                            }
                        },
                        methods: {
                            getMsg(){
                                var _this = this;
                                vue.$on('receive', function (msg) {
                                    _this.msg = msg;
                                })
                            }
                        },
                        template: '#template3'
                    }
                }
            }
        }
    });
</script>
</body>
</html>